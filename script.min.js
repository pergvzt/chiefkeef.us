document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("overlay-text"),t=document.getElementById("overlay"),s=document.getElementById("center-box"),a=document.getElementById("play-pause"),n=document.getElementById("audio-player");setTimeout(()=>e.classList.add("visible"),250);const d=new Gradient;d.initGradient("#gradient-canvas"),shuffleSongs(),loadSong(currentSongIndex),updateCounters(),e.addEventListener("click",()=>{t.classList.add("hidden"),setTimeout(()=>{t.style.display="none",s.style.display="block",setTimeout(()=>{s.style.opacity=1,s.style.transform="translate(-50%, -50%) scale(1)",setTimeout(()=>{s.style.animation="pulse 2s infinite ease-in-out"},2e3)},500)},1e3);const e=document.getElementById("music-player");setTimeout(()=>{e.style.opacity=1,e.style.transform="translate(-50%, 0)"},2500),n.play(),a.classList.add("paused")})});const songs=["sounds/Macias - INTRODESTRUKCJA.mp3","sounds/PIKERS - NIKT NIE MOWIŁ ŻE ŁATWO BĘDZIE.mp3","sounds/DiamondsOnMyDick - Bloodr4yne.mp3","sounds/GRUBVS - NIE POMOGE.mp3","sounds/ICYTWAT - AT YA DOME.mp3","sounds/ICYTWAT - COME SEE ME.mp3","sounds/kt - 223.mp3","sounds/ICYTWAT - LOVE WHO.mp3","sounds/PIKERS - CYRKIEL EVILPLUG.mp3","sounds/THOTTWAT - FUKDALAW.mp3","sounds/ICYTWAT - Eyez On Em.mp3","sounds/THOTTWAT - MILITIA.mp3","sounds/tn_490 - Please.mp3","sounds/VKIE - 2007 PIERWSZY TRACK.mp3","sounds/VKIE - KILO.mp3","sounds/TOM HENGST - 2 ZÖPFE.mp3","sounds/VKIE - NLE.mp3","sounds/tn_490 - Jezebel.mp3","sounds/TOM HENGST - LOBSTER.mp3"];let playedSongsCount=0,currentSongIndex=0;const songHistory=[],audioPlayer=document.getElementById("audio-player"),songTitle=document.getElementById("song-title"),playPauseButton=document.getElementById("play-pause"),progress=document.getElementById("progress"),progressContainer=document.getElementById("progress-container"),songsPlayed=document.getElementById("songs-played"),songsLeft=document.getElementById("songs-left"),timeElapsed=document.getElementById("time-elapsed"),timeRemaining=document.getElementById("time-remaining");let isDragging=!1,wasPlaying=!1;function updateCounters(){songsPlayed.innerText=`Songs played: ${Math.min(playedSongsCount+1,songs.length)}`,songsLeft.innerText=`Songs left: ${Math.max(songs.length-(playedSongsCount+1),0)}`}function loadSong(e){audioPlayer.src=songs[e];const t=songs[e].split("/").pop().replace(".mp3","");songTitle.innerText=t,updateCounters()}function playPause(){audioPlayer.paused?(audioPlayer.play(),playPauseButton.classList.add("paused")):(audioPlayer.pause(),playPauseButton.classList.remove("paused"))}function prevSong(){songHistory.length>0&&(currentSongIndex=songHistory.pop(),playedSongsCount--,loadSong(currentSongIndex),audioPlayer.play(),playPauseButton.classList.add("paused"),updateCounters())}function shuffleSongs(){for(let e=songs.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[songs[e],songs[t]]=[songs[t],songs[e]]}}function nextSong(){playedSongsCount>=songs.length-1?(shuffleSongs(),playedSongsCount=0,songHistory.length=0):(songHistory.push(currentSongIndex),currentSongIndex=(currentSongIndex+1)%songs.length,playedSongsCount++),loadSong(currentSongIndex),audioPlayer.play(),playPauseButton.classList.add("paused"),updateCounters()}function updateProgress(){const{currentTime:e,duration:t}=audioPlayer;if(!isNaN(e)&&!isNaN(t)){const s=e/t*100;progress.style.width=s+"%";const a=Math.floor(e/60),n=Math.floor(e%60),d=Math.floor((t-e)/60),o=Math.floor((t-e)%60);timeElapsed.innerText=`Elapsed: ${a}:${n<10?"0":""}${n}`,timeRemaining.innerText=`Remaining: ${d}:${o<10?"0":""}${o}`}}function setProgress(e){const t=progressContainer.getBoundingClientRect(),s=t.width,a=e.clientX-t.left,n=audioPlayer.duration;isNaN(n)||(audioPlayer.currentTime=a/s*n,updateProgress())}function startDrag(e){isDragging=!0,wasPlaying=!audioPlayer.paused,audioPlayer.pause(),setProgress(e),document.body.style.cursor="default"}function drag(e){isDragging&&requestAnimationFrame(()=>setProgress(e))}function endDrag(){isDragging&&(isDragging=!1,wasPlaying&&audioPlayer.play(),document.body.style.cursor="default")}let firstMove=!0,particleInterval,mouseX,mouseY;function createParticles(e,t,s,a,n,d){for(let o=0;o<1;o++)createParticle(e,t,s,a,n,d)}function createParticle(e,t,s,a,n,d){const o=document.createElement("div");o.classList.add(a),s&&o.classList.add("first-move"),document.body.appendChild(o),o.style.backgroundColor=["#656a95","#0c0d0d"][Math.floor(2*Math.random())],o.style.left=`${e+(Math.random()-.5)*n}px`,o.style.top=`${t+(Math.random()-.5)*d}px`,o.style.animationDuration=.5*Math.random()+.5+"s",o.style.transform=`translateX(${(Math.random()-.5)*n}px) translateY(${(Math.random()-.5)*d}px)`,setTimeout(()=>{o.remove()},500)}document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("mousemove",function(e){mouseX=e.clientX,mouseY=e.clientY,firstMove&&(firstMove=!1,createParticles(mouseX,mouseY,!0,"particle",15,15),particleInterval=setInterval(()=>{createParticles(mouseX,mouseY,!1,"particle",15,15)},100))})}),playPauseButton.addEventListener("click",playPause),document.getElementById("prev").addEventListener("click",prevSong),document.getElementById("next").addEventListener("click",nextSong),audioPlayer.addEventListener("timeupdate",updateProgress),audioPlayer.addEventListener("ended",nextSong),progressContainer.addEventListener("mousedown",startDrag),document.addEventListener("mousemove",drag),document.addEventListener("mouseup",endDrag);
